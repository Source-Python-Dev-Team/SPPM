{% extends "common/sidebar.html" %}
{% load bbcode_tags %}
{% bbcode entry.bbcode_content %}

{% block title %}{{ package.name }} - version {{ package.version }}{% endblock title %}

{% block content %}

    <body>

        {% if plugin.logo %}
            <img src="{{ MEDIA_URL }}{{ package.logo }}" height="135" width="135" alt="{{ package }} Logo"/>
        {% endif %}
        <h1>{{ package.name }} - version {{ package.version }}</h1>
        <ul>
            <h2>Owner:</h2>
            <ul><a href="{{ package.owner.get_absolute_url }}">{{ package.owner }}</a></ul>
            {% if contributors %}
                <h2>Contributors:</h2>
                <ul>
                    {% for user in contributors %}
                        <a href="{{ user.get_absolute_url }}">{{ user }}</a>
                        <br />
                    {% endfor %}
                </ul>
            {% endif %}

            <br />
            <p>Created on {{ package.date_created }}</p>
            {% if package.date_last_updated %}
                <p>Last updated on {{ package.date_last_updated }}</p>
            {% endif %}
        </ul>

        {% if package.description.rendered %}
            <h3>Description</h3>
            <ol>
                {{ package.description.rendered }}
            </ol>
            <br />
        {% endif %}

        {% if package_requirements or pypi_requirements %}
            <h3>Requirements</h3>
            {% if package_requirements %}
                <br />
                <ul>
                <p>Required packages:</p>
                <ul>
                {% for required_package in package_requirements %}
                    <li><a href="{{ required_package.get_absolute_url }}">{{ required_package.name }}</a></li>
                {% endfor %}
                </ul>
                </ul>
            {% endif %}
            {% if pypi_requirements %}
                <br />
                <ul><p>Required PyPi packages:</p>
                <ul>
                {% for required_pypi in pypi_requirements %}
                    <li><a href="{{ required_pypi.get_absolute_url }}">{{ required_pypi.name }}</a></li>
                {% endfor %}
                </ul>
                </ul>
            {% endif %}
        {% endif %}

        <h3>Installation</h3>
        <ol>
            <li>Download the zip file.</li>
            <li>Extract the zip file to your server's primary directory (ie <span style="color: blue">../my_servers/css/cstrike/</span>).</li>
        </ol>
        <br />

        {% if package.configuration.rendered %}
            <h3>Configuration</h3>
            <ol>
                {{ package.configuration.rendered }}
            </ol>
            <br />
        {% endif %}

        <p>As this is a package, you cannot simply load it.  Plugins, Sub-Plugins, and even other Packages may utilize this package by importing it in their code.</p>

        {% if required_in_plugins %}
            <br />
            <p>Here is a list of plugins that require {{ package.name }}:</p>
            <ul>
            {% for plugin in required_in_plugins %}
                <li><a href="{{ plugin.get_absolute_url }}">{{ plugin.name }}</a></li>
            {% endfor %}
            </ul>
        {% endif %}

        {% if required_in_sub_plugins %}
            <br />
            <p>Here is a list of sub-plugins that require {{ package.name }}:</p>
            <ul>
            {% for sub_plugin in required_in_sub_plugins %}
                <li><a href="{{ sub_plugin.get_absolute_url }}">{{ sub_plugin.name }}</a></li>
            {% endfor %}
            </ul>
        {% endif %}

        {% if required_in_packages %}
            <br />
            <p>Here is a list of other packages that require {{ package.name }}:</p>
            <ul>
            {% for other in required_in_packages %}
                <li><a href="{{ other.get_absolute_url }}">{{ other.name }}</a></li>
            {% endfor %}
            </ul>
        {% endif %}

        {# TODO: Add package requirements #}
        {# TODO: Add pypi requirements #}

        <br />
        <b><a href="{% url 'packages:list_contributors' slug=package.slug %}">Manage Contributors</a></b><br />
        <b><a href="{% url 'packages:edit' slug=package.slug %}">Edit Page</a></b><br />
        <b><a href="{% url 'packages:update' slug=package.slug %}">Update Package</a></b>

    </body>

{% endblock content %}
