{% extends "base.html" %}

{% block title %}
    Recent Plugins
{% endblock title %}

{% block content %}

    {% load static %}
    <div class="block pluginslist">
        <h1>Plugins</h1>
        <div class="section">
            <div class="sectiontop">
                <div class="sectionsort">
                    <div class="dropdown dropleft">
                        <div class="sectionsortoption">
                            <p>Game:</p>
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                {% if game_name %}
                                    {{ game_name }} <span class="caret"></span>
                                {% else %}
                                    Any <span class="caret"></span>
                                {% endif %}
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                <li><a href="{% url 'plugins:list' %}?{{ order_url }}">Any</a></li>
                                {% for game in games %}
                                    {% if order_url %}
                                        <li><a href="{% url 'plugins:list' %}?{{ order_url }}&game={{ game.slug }}">{{ game.name }}</a></li>
                                    {% else %}
                                        <li><a href="{% url 'plugins:list' %}?game={{ game.slug }}">{{ game.name }}</a></li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <div class="dropdown dropright">
                        <div class="sectionsortoption">
                            <p>Sort by:</p>
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                Latest Update <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                <li><a href="#" data-value="Sort by: Latest Update">Latest Update</a></li>
                                <li><a href="#" data-value="Sort by: Submission Date">Submission Date</a></li>
                                <li><a href="#" data-value="Sort by: Rating">Rating</a></li>
                                <li><a href="#" data-value="Sort by: Downloads">Downloads</a></li>
                                <li><a href="#" data-value="Sort by: Title">Title</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sectioncontent">
                <div class="sectionentry">
                    {% if plugin_list %}
                        {% for plugin in plugin_list %}
                            <div class="entryleft">
                                <div class="entryimg">
                                    <a href="{{ plugin.get_absolute_url }}">
                                        {% if plugin.logo %}
                                            <img src="{{ MEDIA_URL }}{{ plugin.logo }}" alt="{{ plugin }} Logo"/>
                                        {% else %}
                                            <img src="{% static "project_manager/img/default.png" %}" alt="{{ plugin }} Logo"/>
                                        {% endif %}
                                    </a>
                                </div>
                            </div>
                            <div class="entryright">
                                <div class="entrytitle">
                                    <a href="{{ plugin.get_absolute_url }}">{{ plugin }}</a> -
                                    <div class="entryversion">
                                        <a  href="{% url 'plugins:releases' slug=plugin.slug %}">v{{ plugin.current_version }}</a></h4>
                                    </div>
                                </div>
                                <div class="entrydescription">{{ plugin.description.rendered }} </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        {% if game_name %}
                            <h2>No plugins currently support {{ game_name }}.</h2>
                        {% elif game_slug %}
                            <h2>Invalid game {{ game_slug }}.</h2>
                        {% else %}
                            <h2>No plugins are registered.</h2>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
            <div class="sectionfooter">
                <div class="pagenumbers">
                    {% for page_url in page_url_list %}
                        {% if page_url.url %}
                            <a href="{% url 'plugins:list' %}{{ page_url.url }}">{{ page_url.display }}</a>
                        {% else %}
                            {{ page_url.display }}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
