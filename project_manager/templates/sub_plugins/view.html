{% extends "base.html" %}
{% load i18n %}
{% load bbcode_tags %}
{% bbcode entry.bbcode_content %}

{% block title %}
    {{ sub_plugin }} - version {{ current_version }}
{% endblock title %}

{% block content %}
    {% if sub_plugin.logo %}
        <img src="{{ MEDIA_URL }}{{ sub_plugin.logo }}" height="135" width="135" alt="{{ sub_plugin }} Logo"/>
    {% endif %}
    <h1>{{ sub_plugin }} - version {{ current_version }}</h1>
    <ul>
        <b><a href="{% url 'plugins:sub-plugins:edit' slug=sub_plugin.plugin.slug sub_plugin_slug=sub_plugin.slug %}">Edit Page</a></b> |
        <b><a href="{% url 'plugins:sub-plugins:update' slug=sub_plugin.plugin.slug sub_plugin_slug=sub_plugin.slug %}">Update Sub-Plugin</a></b> |
        <b><a href="{% url 'plugins:sub-plugins:select-games' slug=sub_plugin.plugin.slug sub_plugin_slug=sub_plugin.slug %}">Select games</a></b>
    </ul>

    <h4><a href="{{ current_release.get_absolute_url }}"><u>Download current version</u></a> &nbsp; <span style="font-size: small;">( <a href="{% url 'plugins:sub-plugins:releases' slug=sub_plugin.plugin.slug sub_plugin_slug=sub_plugin.slug %}"><u>View all releases</u></a> )</span> &nbsp; Total downloads: {{ sub_plugin.total_downloads }}</h4>

    <p>Sub-Plugin for <a href="{{ sub_plugin.plugin.get_absolute_url }}">{{ sub_plugin.plugin }}</a></p>

    {% if sub_plugin.synopsis.rendered %}
        <br />
        {{ sub_plugin.synopsis.rendered }}
        <br />
    {% endif %}

    <br />
    <p>Created on {{ sub_plugin.datetime_created }}</p>
    {% if sub_plugin.datetime_last_updated %}
        <p>Last updated on {{ sub_plugin.datetime_last_updated }}</p>
    {% endif %}

    <br />
    <ul>
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-primary panel-primary-custom">
                    <div class="panel-heading panel-heading-custom">
                        <h3 class="panel-title">Owner</h3>
                    </div>
                    <table class="table">
                        <tbody>
                            <tr>
                                <td><a href="{{ sub_plugin.owner.get_absolute_url }}">{{ sub_plugin.owner }}</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <br />
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-primary panel-primary-custom">
                    <div class="panel-heading panel-heading-custom">
                        <h3 class="panel-title">Contributors</h3>
                        <span class="pull-right" style="margin-top: -20px">
                            <a href="{% url 'plugins:sub-plugins:contributors:add' slug=sub_plugin.plugin.slug sub_plugin_slug=sub_plugin.slug %}">
                                <button type="button" class="btn btn-xs btn-default">Add Contributor</button>
                            </a>
                        </span>
                    </div>
                    <table class="table table-striped">
                        <tbody>
                            {% for contributor in contributors %}
                                <tr>
                                    <td><a href="{{ contributor.get_absolute_url }}">{{ contributor }}</a></td>
                                    <td class="text-right">
    {#                                    <a data-toggle="modal" href="#{{  }}"#}
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="2" class="text-center">There are no contributors</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </ul>

    {% if supported_games %}
        <h3>Supported Games</h3>
        <ul>
            {% for game in supported_games %}
                <a href="{{ game.get_absolute_url }}"><img src="{{ MEDIA_URL }}{{ game.icon }}" style="margin-right: -14px;" alt="{{ game }} Icon"/></a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            {% endfor %}
        </ul>
    {% endif %}

    {% if sub_plugin.description.rendered %}
        <h3>Description</h3>
        <ol>
            {{ sub_plugin.description.rendered }}
        </ol>
        <br />
    {% endif %}

    <h3>Installation</h3>
    <ol>
        <li>Download the zip file.</li>
        <li>Extract the zip file to your server's primary directory (ie <span style="color: blue">../my_servers/css/cstrike/</span>).</li>
    </ol>
    <br />

    {% if sub_plugin.configuration.rendered %}
        <h3>Configuration</h3>
        <ol>
            {{ sub_plugin.configuration.rendered }}
        </ol>
        <br />
    {% endif %}

    <p>As this is a sub-plugin, it is up to the <a href="{{ sub_plugin.plugin.get_absolute_url }}">{{ sub_plugin.plugin }}</a> plugin to determine how to load it.</p>

    {% if package_requirements or pypi_requirements %}
        <h3>Requirements</h3>

        <ul>
            {% if package_requirements %}
                <br />
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel panel-primary panel-primary-custom">
                            <div class="panel-heading panel-heading-custom">
                                <h3 class="panel-title">Package Requirements</h3>
                            </div>
                            <table class="table">
                                <tbody>
                                    {% for package_requirement in package_requirements %}
                                        <tr>
                                            <td><a href="{{ package_requirement.get_absolute_url }}">{{ package_requirement }}</a></td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            {% endif %}

            {% if pypi_requirements %}
                <br />
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel panel-primary panel-primary-custom">
                            <div class="panel-heading panel-heading-custom">
                                <h3 class="panel-title">PyPi Requirements</h3>
                            </div>
                            <table class="table">
                                <tbody>
                                    {% for pypi_requirement in pypi_requirements %}
                                        <tr>
                                            <td><a href="{{ pypi_requirement.get_absolute_url }}">{{ pypi_requirement }}</a></td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            {% endif %}
        </ul>
    {% endif %}
{% endblock content %}
