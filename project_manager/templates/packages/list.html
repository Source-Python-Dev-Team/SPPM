{% extends "base.html" %}

{% block title %}
    Recent Packages
{% endblock title %}

{% block content %}
    {% load static %}
    <div class="block packageslist">
        <h1>Packages</h1>
        <div class="section">
            <div class="sectiontop">
                <div class="sectionsort">
                    <div class="dropdown dropleft">
                        <div class="sectionsortoption">
                            <p>Game:</p>
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                {% if game_name %}
                                    {{ game_name }} <span class="caret"></span>
                                {% else %}
                                    Any <span class="caret"></span>
                                {% endif %}
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                <li><a href="{% url 'packages:list' %}?{{ order_url }}">Any</a></li>
                                {% for game in games %}
                                    {% if order_url %}
                                        <li><a href="{% url 'packages:list' %}?{{ order_url }}&game={{ game.slug }}">{{ game.name }}</a></li>
                                    {% else %}
                                        <li><a href="{% url 'packages:list' %}?game={{ game.slug }}">{{ game.name }}</a></li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <div class="dropdown dropright">
                        <div class="sectionsortoption">
                            <p>Sort by:</p>
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                Latest Update <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                <li><a href="#" data-value="Sort by: Latest Update">Latest Update</a></li>
                                <li><a href="#" data-value="Sort by: Submission Date">Submission Date</a></li>
                                <li><a href="#" data-value="Sort by: Rating">Rating</a></li>
                                <li><a href="#" data-value="Sort by: Downloads">Downloads</a></li>
                                <li><a href="#" data-value="Sort by: Title">Title</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sectioncontent">
                <div class="sectionentry">
                    {% if package_list %}
                        {% for package in package_list %}
                            <div class="entryleft">
                                <div class="entryimg">
                                    <a href="{{ package.get_absolute_url }}">
                                        {% if package.logo %}
                                            <img src="{{ MEDIA_URL }}{{ package.logo }}" alt="{{ package }} Logo"/>
{#                                        {% else %}#}
{#                                            <img src="{% static "project_manager/img/default.png" %}" alt="{{ package }} Logo"/>#}
                                        {% endif %}
                                    </a>
                                </div>
                            </div>
                            <div class="entryright">
                                <div class="entrytitle">
                                    <a href="{{ package.get_absolute_url }}">{{ package }}</a> -
                                    <div class="entryversion">
                                        <a  href="{% url 'packages:releases' slug=package.slug %}">v{{ package.current_version }}</a></h4>
                                    </div>
                                </div>
                                <div class="entrydescription">{{ package.synopsis.rendered }}</div>
                            </div>
                        {% endfor %}
                    {% else %}
                        {% if game_name %}
                            <h2>No packages currently support {{ game_name }}.</h2>
                        {% elif game_slug %}
                            <h2>Invalid game {{ game_slug }}.</h2>
                        {% else %}
                            <h2>No packages are registered.</h2>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
            <div class="sectionfooter">
                <div class="pagenumbers">
                    {% for page_url in page_url_list %}
                        {% if page_url.url %}
                            <a href="{% url 'packages:list' %}{{ page_url.url }}">{{ page_url.display }}</a>
                        {% else %}
                            {{ page_url.display }}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

{% endblock content %} 
